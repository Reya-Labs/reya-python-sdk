{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://api.reya.xyz/schemas/trading-schemas.json",
  "definitions": {
    "MarketSummary": {
      "type": "object",
      "required": [
        "symbol",
        "updatedAt",
        "longOiQty",
        "shortOiQty",
        "oiQty",
        "fundingRate",
        "longFundingValue",
        "shortFundingValue",
        "fundingRateVelocity",
        "volume24h"
      ],
      "properties": {
        "symbol": {
          "type": "string",
          "example": "BTCRUSDPERP"
        },
        "updatedAt": {
          "type": "integer",
          "description": "Time when the market summary was last calculated (milliseconds)",
          "example": 1747927089946
        },
        "longOiQty": {
          "type": "string",
          "description": "Long open interest in lots",
          "example": "154.741"
        },
        "shortOiQty": {
          "type": "string",
          "description": "Short open interest in lots",
          "example": "154.706"
        },
        "oiQty": {
          "type": "string",
          "description": "Total open interest quantity",
          "example": "154.741"
        },
        "fundingRate": {
          "type": "string",
          "description": "Current hourly funding rate",
          "example": "-0.000509373441021089"
        },
        "longFundingValue": {
          "type": "string",
          "description": "Current long funding value",
          "example": "412142.26"
        },
        "shortFundingValue": {
          "type": "string",
          "description": "Current short funding value",
          "example": "412142.26"
        },
        "fundingRateVelocity": {
          "type": "string",
          "description": "Funding rate velocity",
          "example": "-0.00000006243"
        },
        "volume24h": {
          "type": "string",
          "example": "917833.49891"
        },
        "pxChange24h": {
          "type": "string",
          "example": "92.6272285500004"
        },
        "throttledOraclePrice": {
          "type": "string",
          "description": "Last oracle price, at the moment of the last market summary update",
          "example": "2666.48162040777"
        },
        "throttledPoolPrice": {
          "type": "string",
          "description": "Last pool price, at the moment of the last market summary update",
          "example": "2666.48166680625"
        },
        "pricesUpdatedAt": {
          "type": "integer",
          "description": "Timestamp of the last price update (milliseconds)",
          "example": 1747927089597
        }
      }
    },
    "Position": {
      "type": "object",
      "required": [
        "exchangeId",
        "symbol",
        "accountId",
        "qty",
        "side",
        "avgEntryPrice",
        "avgEntryFundingValue",
        "lastTradeSequenceNumber"
      ],
      "properties": {
        "exchangeId": {
          "type": "integer",
          "example": 1
        },
        "symbol": {
          "type": "string",
          "example": "BTCRUSDPERP"
        },
        "accountId": {
          "type": "integer",
          "example": 12345
        },
        "qty": {
          "type": "string",
          "example": "1.5"
        },
        "side": {
          "$ref": "#/definitions/Side"
        },
        "avgEntryPrice": {
          "type": "string",
          "example": "43000.00"
        },
        "avgEntryFundingValue": {
          "type": "string",
          "description": "Average entry funding value.",
          "example": "100.25"
        },
        "lastTradeSequenceNumber": {
          "type": "integer",
          "description": "Sequence number of last execution taken into account for the position.",
          "example": 152954
        }
      }
    },
    "Order": {
      "type": "object",
      "required": [
        "exchangeId",
        "symbol",
        "accountId",
        "side",
        "limitPx",
        "orderType",
        "status",
        "createdAt",
        "lastUpdateAt"
      ],
      "properties": {
        "exchangeId": {
          "type": "integer",
          "example": 1
        },
        "symbol": {
          "type": "string",
          "example": "BTCRUSDPERP"
        },
        "accountId": {
          "type": "integer",
          "example": 12345
        },
        "orderId": {
          "type": "string",
          "example": "123456789-123123123"
        },
        "qty": {
          "type": "string",
          "example": "1.0"
        },
        "execQty": {
          "type": "string",
          "description": "Executed quantity. Example: I request 1.0 BTCRUSDPERP and the order is filled with 0.2 BTCRUSDPERP, qty will stay at 1.0 and execQty will be 0.2.",
          "example": "0.5"
        },
        "side": {
          "$ref": "#/definitions/Side"
        },
        "limitPx": {
          "type": "string",
          "example": "43000.00"
        },
        "orderType": {
          "$ref": "#/definitions/OrderType"
        },
        "triggerPx": {
          "type": "string",
          "description": "Price at which TP/SL orders will be triggered, should not be set for other order types.",
          "example": "50000.0"
        },
        "timeInForce": {
          "$ref": "#/definitions/TimeInForce",
          "description": "Order time in force, exclusively used for LIMIT orders",
          "example": "GTC"
        },
        "reduceOnly": {
          "type": "boolean",
          "description": "Whether this is a reduce-only order, exclusively used for LIMIT IOC orders.",
          "example": false
        },
        "status": {
          "$ref": "#/definitions/OrderStatus"
        },
        "createdAt": {
          "type": "integer",
          "description": "Creation timestamp (milliseconds)",
          "example": 1747927089946
        },
        "lastUpdateAt": {
          "type": "integer",
          "description": "Last update timestamp (milliseconds)",
          "example": 1747927089946
        }
      }
    },
    "AccountBalance": {
      "title": "AccountBalance",
      "$id": "#AccountBalance",
      "x-parser-schema-id": "AccountBalance",
      "type": "object",
      "required": [
        "accountId",
        "symbol",
        "balance"
      ],
      "properties": {
        "accountId": {
          "type": "integer",
          "example": 12345
        },
        "symbol": {
          "type": "string",
          "example": "RUSD"
        },
        "balance": {
          "type": "string",
          "description": "Account balance",
          "example": "25100.076"
        }
      }
    },
    "PerpExecution": {
      "type": "object",
      "required": [
        "exchangeId",
        "symbol",
        "accountId",
        "qty",
        "side",
        "fee",
        "price",
        "type",
        "timestamp",
        "sequenceNumber"
      ],
      "properties": {
        "exchangeId": {
          "type": "integer",
          "example": 1
        },
        "symbol": {
          "type": "string",
          "example": "BTCRUSDPERP"
        },
        "accountId": {
          "type": "integer",
          "example": 12345
        },
        "qty": {
          "type": "string",
          "example": "1.0"
        },
        "side": {
          "$ref": "#/definitions/Side"
        },
        "price": {
          "type": "string",
          "example": "43000.00"
        },
        "fee": {
          "type": "string",
          "example": "0.50"
        },
        "type": {
          "$ref": "#/definitions/ExecutionType"
        },
        "timestamp": {
          "type": "integer",
          "description": "Execution timestamp (milliseconds)",
          "example": 1747927089946
        },
        "sequenceNumber": {
          "type": "integer",
          "description": "Execution sequence number, increases by 1 for every perp execution in reya chain",
          "example": 152954
        }
      }
    },
    "SpotExecution": {
      "type": "object",
      "required": [
        "exchangeId",
        "symbol",
        "accountId",
        "side",
        "qty",
        "fee",
        "type",
        "timestamp"
      ],
      "properties": {
        "exchangeId": {
          "type": "integer",
          "example": 1
        },
        "symbol": {
          "type": "string",
          "example": "BTCRUSD"
        },
        "accountId": {
          "type": "integer",
          "example": 12345
        },
        "side": {
          "$ref": "#/definitions/Side"
        },
        "qty": {
          "type": "string",
          "example": "1.0"
        },
        "price": {
          "type": "string",
          "example": "43000.00"
        },
        "fee": {
          "type": "string",
          "example": "0.0"
        },
        "type": {
          "$ref": "#/definitions/ExecutionType"
        },
        "timestamp": {
          "type": "integer",
          "description": "Execution timestamp (milliseconds)",
          "example": 1747927089946
        }
      }
    },
    "Price": {
      "type": "object",
      "required": [
        "symbol",
        "updatedAt"
      ],
      "properties": {
        "symbol": {
          "type": "string",
          "example": "BTCRUSDPERP"
        },
        "oraclePrice": {
          "type": "string",
          "description": "Oracle price, also known as spot price",
          "example": "43000.00"
        },
        "poolPrice": {
          "type": "string",
          "description": "Pool price",
          "example": "42999.50"
        },
        "updatedAt": {
          "type": "integer",
          "description": "Last update timestamp (milliseconds)",
          "example": 1747927089946
        }
      }
    },
    "Side": {
      "title": "Side",
      "$id": "#Side",
      "x-parser-schema-id": "Side",
      "type": "string",
      "enum": ["B", "A"],
      "description": "Order side (B = Buy/Bid, A = Ask/Sell)"
    },
    "ExecutionType": {
      "title": "ExecutionType",
      "$id": "#ExecutionType",
      "x-parser-schema-id": "ExecutionType",
      "type": "string",
      "enum": ["ORDER_MATCH", "LIQUIDATION", "ADL"],
      "description": "Type of execution"
    },
    "OrderStatus": {
      "title": "OrderStatus",
      "$id": "#OrderStatus",
      "x-parser-schema-id": "OrderStatus",
      "type": "string",
      "enum": ["OPEN", "FILLED", "CANCELLED", "REJECTED"],
      "description": "Order status"
    },
    "TierType": {
      "type": "string",
      "enum": ["REGULAR", "VIP"],
      "description": "Fee tier type (REGULAR = Standard tier, VIP = VIP tier)"
    },
    "MarketDefinition": {
      "type": "object",
      "required": [
        "symbol",
        "marketId",
        "minOrderQty",
        "qtyStepSize",
        "tickSize",
        "liquidationMarginParameter",
        "initialMarginParameter",
        "maxLeverage",
        "oiCap"
      ],
      "properties": {
        "symbol": {
          "type": "string",
          "example": "BTCRUSDPERP"
        },
        "marketId": {
          "type": "integer",
          "description": "Numerical identifier for each market, only needed to generate signatures",
          "example": 1
        },
        "minOrderQty": {
          "type": "string",
          "example": "0.001"
        },
        "qtyStepSize": {
          "type": "string",
          "description": "Minimum size increment",
          "example": "0.001"
        },
        "tickSize": {
          "type": "string",
          "description": "Minimum price increment",
          "example": "0.01"
        },
        "liquidationMarginParameter": {
          "type": "string",
          "description": "Liquidation margin requirement parameter",
          "example": "0.05"
        },
        "initialMarginParameter": {
          "type": "string",
          "description": "Initial margin requirement parameter",
          "example": "0.04"
        },
        "maxLeverage": {
          "type": "integer",
          "description": "Maximum leverage allowed",
          "example": 40
        },
        "oiCap": {
          "type": "string",
          "description": "Max absolute open interest",
          "example": "10000"
        }
      }
    },
    "Account": {
      "type": "object",
      "required": [
        "accountId",
        "name",
        "lastUpdateAt"
      ],
      "properties": {
        "accountId": {
          "type": "integer",
          "example": 12345
        },
        "name": {
          "type": "string",
          "example": "Margin Account 1"
        },
        "lastUpdateAt": {
          "type": "integer",
          "description": "Last update timestamp (milliseconds)",
          "example": 1747927089946
        }
      }
    },
    "AssetDefinition": {
      "type": "object",
      "required": [
        "asset",
        "spotMarketSymbol",
        "priceHaircut",
        "liquidationDiscount",
        "timestamp"
      ],
      "properties": {
        "asset": {
          "type": "string",
          "example": "WSTETH"
        },
        "spotMarketSymbol": {
          "type": "string",
          "example": "WSTETHRUSD"
        },
        "priceHaircut": {
          "type": "string",
          "description": "Price haircut percentage",
          "example": "0.05"
        },
        "liquidationDiscount": {
          "type": "string",
          "description": "Liquidation discount percentage",
          "example": "0.03"
        },
        "timestamp": {
          "type": "integer",
          "description": "Configuration timestamp (milliseconds)",
          "example": 1747927089946
        }
      }
    },
    "CandleHistoryData": {
      "type": "object",
      "required": [
        "t",
        "o",
        "h",
        "l",
        "c"
      ],
      "properties": {
        "t": {
          "type": "array",
          "items": {
            "type": "integer"
          },
          "description": "Array of timestamps (seconds)",
          "example": [1747804140, 1747804200, 1747804260]
        },
        "o": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Array of opening prices",
          "example": ["2557.997", "2555.386", "2560.118"]
        },
        "h": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Array of high prices",
          "example": ["2558.000", "2560.699", "2560.729"]
        },
        "l": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Array of low prices",
          "example": ["2554.637", "2553.436", "2559.368"]
        },
        "c": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Array of closing prices",
          "example": ["2555.387", "2560.118", "2560.439"]
        }
      }
    },
    "FeeTierParameters": {
      "type": "object",
      "required": [
        "tierId",
        "takerFee",
        "makerFee",
        "volume14d",
        "tierType"
      ],
      "properties": {
        "tierId": {
          "type": "integer",
          "example": 1
        },
        "takerFee": {
          "type": "string",
          "description": "Taker fee rate (fee will be qty * takerFee)",
          "example": "0.0004"
        },
        "makerFee": {
          "type": "string",
          "description": "Maker fee rate (fee will be qty * makerFee)",
          "example": "0.0002"
        },
        "volume14d": {
          "type": "string",
          "description": "14-day volume level required this fee tier to be applied to a wallet",
          "example": "10000.0"
        },
        "tierType": {
          "$ref": "#/definitions/TierType"
        }
      }
    },
    "GlobalFeeParameters": {
      "type": "object",
      "required": [
        "ogDiscount",
        "refereeDiscount",
        "referrerRebate",
        "affiliateReferrerRebate"
      ],
      "properties": {
        "ogDiscount": {
          "type": "string",
          "description": "OG user discount",
          "example": "0.3"
        },
        "refereeDiscount": {
          "type": "string",
          "description": "Referee discount",
          "example": "0.1"
        },
        "referrerRebate": {
          "type": "string",
          "description": "Referrer rebate",
          "example": "0.1"
        },
        "affiliateReferrerRebate": {
          "type": "string",
          "description": "Affiliate referrer rebate",
          "example": "0.15"
        }
      }
    },
    "LiquidityParameters": {
      "type": "object",
      "required": [
        "symbol",
        "depth",
        "velocityMultiplier"
      ],
      "properties": {
        "symbol": {
          "type": "string",
          "example": "ETH-USD"
        },
        "depth": {
          "type": "string",
          "description": "Liquidity depth parameter",
          "example": "1000.0"
        },
        "velocityMultiplier": {
          "type": "string",
          "description": "Velocity multiplier parameter",
          "example": "1.5"
        }
      }
    },
    "WalletConfiguration": {
      "type": "object",
      "required": [
        "feeTierId",
        "ogStatus",
        "affiliateStatus",
        "refereeStatus"
      ],
      "properties": {
        "feeTierId": {
          "type": "integer",
          "description": "Fee tier identifier",
          "example": 1
        },
        "ogStatus": {
          "type": "boolean",
          "description": "OG status",
          "example": true
        },
        "affiliateStatus": {
          "type": "boolean",
          "description": "Affiliate status",
          "example": false
        },
        "refereeStatus": {
          "type": "boolean",
          "description": "Referee status",
          "example": false
        }
      }
    },
    "PerpExecutionList": {
      "type": "object",
      "required": [
        "data",
        "meta"
      ],
      "properties": {
        "data": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/PerpExecution"
          }
        },
        "meta": {
          "$ref": "#/definitions/PaginationMeta"
        }
      }
    },
    "SpotExecutionList": {
      "type": "object",
      "required": [
        "data",
        "meta"
      ],
      "properties": {
        "data": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/SpotExecution"
          }
        },
        "meta": {
          "$ref": "#/definitions/PaginationMeta"
        }
      }
    },
    "PaginationMeta": {
      "type": "object",
      "required": [
        "limit",
        "count"
      ],
      "properties": {
        "limit": {
          "type": "integer",
          "description": "Number of items requested",
          "example": 100
        },
        "count": {
          "type": "integer",
          "description": "Number of items returned",
          "example": 50
        },
        "endTime": {
          "type": "integer",
          "description": "Timestamp of last result, in milliseconds",
          "example": 1756733679000
        },
        "startTime": {
          "type": "integer",
          "description": "Timestamp of first result, in milliseconds",
          "example": 1756733579000
        }
      }
    },
    "Error": {
      "type": "object",
      "required": [
        "error",
        "message"
      ],
      "properties": {
        "error": {
          "$ref": "#/definitions/ErrorCode"
        },
        "message": {
          "type": "string",
          "description": "Human-readable error message",
          "example": "Invalid symbol format"
        }
      }
    },
    "ErrorCode": {
      "type": "string",
      "enum": [
        "SYMBOL_NOT_FOUND",
        "NO_ACCOUNTS_FOUND",
        "NO_PRICES_FOUND_FOR_SYMBOL",
        "INPUT_VALIDATION_ERROR",
        "CREATE_ORDER_OTHER_ERROR",
        "CANCEL_ORDER_OTHER_ERROR",
        "INTERNAL_SERVER_ERROR"
      ],
      "description": "Standardized error codes for API responses"
    },
    "SymbolMarketId": {
      "type": "object",
      "required": [
        "symbol",
        "marketId"
      ],
      "properties": {
        "symbol": {
          "type": "string",
          "example": "BTCRUSDPERP"
        },
        "marketId": {
          "type": "integer",
          "description": "Market identifier",
          "example": 2
        }
      }
    },
    "TimeInForce": {
      "title": "TimeInForce",
      "$id": "#TimeInForce",
      "x-parser-schema-id": "TimeInForce",
      "type": "string",
      "enum": ["IOC", "GTC"],
      "description": "Order time in force (IOC = Immediate or Cancel, GTC = Good Till Cancel)",
      "example": "GTC"
    },
    "OrderType": {
      "title": "OrderType",
      "$id": "#OrderType",
      "x-parser-schema-id": "OrderType",
      "type": "string",
      "enum": ["LIMIT", "TP", "SL"],
      "description": "Order type, (LIMIT = Limit, TP = Take Profit, SL = Stop Loss)",
      "example": "TP"
    },
    "CreateOrderRequest": {
      "type": "object",
      "required": [
        "exchangeId",
        "accountId",
        "isBuy",
        "limitPx",
        "orderType",
        "signature",
        "nonce",
        "signerWallet"
      ],
      "properties": {
        "exchangeId": {
          "type": "integer",
          "example": 1
        },
        "symbol": {
          "type": "string",
          "example": "ETHRUSDPERP"
        },
        "accountId": {
          "type": "integer",
          "example": 12345
        },
        "isBuy": {
          "type": "boolean",
          "description": "Whether this is a buy order",
          "example": true
        },
        "limitPx": {
          "type": "string",
          "example": "50000.0"
        },
        "qty": {
          "type": "string",
          "example": "0.1"
        },
        "orderType": {
          "$ref": "#/definitions/OrderType",
          "example": "LIMIT"
        },
        "timeInForce": {
          "$ref": "#/definitions/TimeInForce",
          "description": "Order time in force, exclusively used for LIMIT orders",
          "example": "GTC"
        },
        "triggerPx": {
          "type": "string",
          "description": "Trigger price, only for TP/SL orders",
          "example": "50000.0"
        },
        "reduceOnly": {
          "type": "boolean",
          "description": "Whether this is a reduce-only order, exclusively used for LIMIT IOC orders.",
          "example": false
        },
        "signature": {
          "type": "string",
          "description": "See signatures and nonces section for more details on how to generate.",
          "example": "0x1234..."
        },
        "nonce": {
          "type": "string",
          "description": "Order nonce, see signatures and nonces section for more details.",
          "example": "1234567890"
        },
        "signerWallet": {
          "type": "string",
          "description": "Signer wallet address",
          "example": "0x1234567890123456789012345678901234567890"
        },
        "expiresAfter": {
          "type": "integer",
          "description": "Expiration timestamp (exclusively for IOC orders). The order will only be filled before this timestamp.",
          "example": 1676923200
        }
      }
    },
    "CreateOrderResponse": {
      "type": "object",
      "required": [
        "status"
      ],
      "properties": {
        "status": {
          "$ref": "#/definitions/OrderStatus"
        },
        "orderId": {
          "type": "string",
          "description": "Created order ID (currently generated for all order types except IOC)",
          "example": "123456789-123123123"
        }
      }
    },
    "CancelOrderRequest": {
      "type": "object",
      "required": [
        "orderId",
        "signature"
      ],
      "properties": {
        "orderId": {
          "type": "string",
          "description": "Order ID to cancel",
          "example": "123456789-123123123"
        },
        "signature": {
          "type": "string",
          "description": "See signatures section for more details on how to generate.",
          "example": "0x5678..."
        }
      }
    },
    "CancelOrderResponse": {
      "type": "object",
      "required": [
        "status",
        "orderId"
      ],
      "properties": {
        "status": {
          "$ref": "#/definitions/OrderStatus"
        },
        "orderId": {
          "type": "string",
          "description": "Cancelled order ID",
          "example": "123456789-123123123"
        }
      }
    }
  }
}